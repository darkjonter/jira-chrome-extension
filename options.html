<!DOCTYPE html>
<html>
<!-- Copyright 2010 andry.virvich@gmail.com. All Rights Reserved. -->
<head>
  <title>JIRA Chrome Extension Options</title>
  <style type="text/css">

  </style>
	<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript">

  function restoreOptions(){
	$("#username").attr("value",  localStorage.getItem('username'));
	$("#password").attr("value",  localStorage.getItem('password'));
	$("#url").attr("value",  (localStorage.getItem('url')?localStorage.getItem('url'):"http://jira.atlassian.com/"));
	var vals = [1, 3, 5, 10, 30, 60];
	var curval = parseInt(localStorage.getItem('updateinterval'))/(1000*60);
	$.map(vals,function(val){
		$("#updateinterval").append($("<OPTION "+((val == curval)?"SELECTED":'')+" />").attr("value", val).text(val));
	});
  }
  function saveOptions(){

	localStorage.setItem('username', $("#username").attr("value"));
	localStorage.setItem('password', $("#password").attr("value"));
	localStorage.setItem('url', $("#url").attr("value"));	
	localStorage.setItem('updateinterval', parseInt($("#updateinterval").attr("value"))*60000);
	chrome.extension.getBackgroundPage().Auth();
	alert("Settings was saved");
  }
  </script>
</head>

<body onload="restoreOptions()">
	<table style="width:100%;height:100%;">
		<tr>
			<td valign="center">
				<center>
				<font size="5" face="calibri, tahoma" color="#2e6eaf">JIRA Chrome Extension Options</font>
				<table style="border:8px solid #87b6d9; border-radius:10px; background-color:#e2e4ff;padding:15px;font-family: Calibri, tahoma">
				<tr>
					<td align="right">Username: </td>
					<td><input id="username" type="text" /></td>
				</tr>
				<tr>
					<td align="right">Password:</td>
					<td><input type="password" id="password" type="text" /></td>
				</tr>
				<tr>
					<td align="right">Jira URL:</td>
					<td><input id="url" type="text" /></td>
				</tr>
				<tr>
					<td align="right">Update Interval:</td>
					<td><select id="updateinterval" ></select>, min</td>
				<tr>
				<tr>
					<td colspan="2" align="right"><hr/><input type="button" onclick="saveOptions();" value="Save Options" /></td>
				</tr>
				</table>
				</center>
			</td>
		</tr>
	</table>
</body>
</html>
